<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns="http://www.mulesoft.org/schema/mule/core"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:spring="http://www.springframework.org/schema/beans"
      xmlns:jasper="http://www.mulesoft.org/schema/mule/jasper"
      xmlns:jms="http://www.mulesoft.org/schema/mule/jms"
      xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd
        http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
        http://www.mulesoft.org/schema/mule/jms http://www.mulesoft.org/schema/mule/jms/current/mule-jms.xsd
        http://www.mulesoft.org/schema/mule/jasper http://www.mulesoft.org/schema/mule/jasper/1.0/mule-jasper.xsd">

    <jasper:config name="Jasper" vendor="jasper" application="jasperConnectorTestDTA" version="0.1" url="tcp://0.0.0.0:61616" />
	
	<jms:activemq-connector name="Active_MQ" brokerURL="tcp://0.0.0.0:61616" validateConnections="true"/>

    <flow name="testPublishToTopic">
        <jasper:publish-to-topic config-ref="Jasper" topic="Topic1"/>
    </flow>

    <flow name="testSendToQueueReceiveResponse">
        <jasper:send-to-queue-receive-response config-ref="Jasper" />
    </flow>

    <flow name="testSubscribeToTopic">
        <jasper:subscribe-to-topic config-ref="Jasper" topic="Topic2"/>
        <jms:outbound-endpoint connector-ref="Active_MQ" queue="Queue2" />
    </flow>

    <flow name="testReceiveFromQueueSendResponse">
        <jasper:receive-from-queue-send-response config-ref="Jasper" queue="Queue3" />
		<append-string-transformer message=" is satisfied" />
		<append-string-transformer message=" 100%" />
    </flow>

</mule>
